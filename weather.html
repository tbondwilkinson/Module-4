<!DOCTYPE html>
<html>
<head>
	<title>The Weather</title>
	<link rel="stylesheet" type="text/css" href=" http://research.engineering.wustl.edu/~todd/cse330/module4/weather.css">
</head>
<body>
	<script type="text/javascript">
	function fetchWeather(){
		alert("Fetching weather!");
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.open("GET", "http://research.engineering.wustl.edu/~todd/cse330/module4/weather_json.php", true);
		xmlHttp.addEventListener("load", ajaxCallback, false);
		xmlHttp.send(null);

	}
	function ajaxCallback(event){
		alert("ajaxCallback");
		var json = JSON.parse(event.target.responseText);
		document.getElementById("weather-loc").innerHTML = "<strong>" + json.location.city + "</strong> " + json.location.state;
		alert(json.location.city);
		document.getElementById("weather-humidity").innerHTML = json.atmosphere.humidity;
		document.getElementById("weather-temp").innerHTML = json.current.temp;
		document.getElementById("weather-tomorrow").innerHTML = "<img src=http://us.yimg.com/i/us/nws/weather/gr/" + json.tomorrow.code + "s.png >";
		docuemnt.getElementById("weather-dayaftertomorrow").innerHTML = "<img src=http://us.yimg.com/i/us/nws/weather/gr/" + json.dayafter.code + "s.png >";
	}
	document.addEventListener("DOMContentLoaded", function(){ alert('DOM') }, false);
	document.addEventListener("DOMContentLoaded", fetchWeather, false);
	</script>
	<div class="weather" id="weatherWidget">
	<div class="weather-loc"></div>
	<div class="weather-humidity"></div>
	<div class="weather-temp"></div>
	<img class="weather-tomorrow" />
	<img class="weather-dayaftertomorrow" />
	</div>
</body>
</html>